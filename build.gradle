defaultTasks 'clean', 'run'

buildscript {
    repositories {
       mavenCentral()
    }
    dependencies {
       classpath group: 'com.xmlcalabash', name:'xmlcalabash', version:'1.0.13-94'
    }
}

import org.gradle.api.DefaultTask
import org.gradle.api.tasks.TaskAction
import com.xmlcalabash.drivers.Main

class CalabashTask extends DefaultTask {
  String command
  String url, password, username
  File changeLog

  @TaskAction
  def calabashAction() {
    def args = [
      "-isource=example.xml",
      "-oresult=out.xml",
      "example.xpl"
    ]

    Main.main(args as String[])
  }
}

task run(type: CalabashTask) {
}

task clean(){
delete "out.xml"
}


